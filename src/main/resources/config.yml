# KedamaSurvivors Configuration
# Version: 1.0.0
# Documentation: https://github.com/NyaaCat/KedamaSurvivors/wiki

# ============================================================
# Plugin Settings
# ============================================================
plugin:
  language: zh_CN
  prefix: "§8[§6武§e生§8] §7"
  verbose: false

# ============================================================
# Join Switch (Global game entry control)
# ============================================================
joinSwitch:
  enabled: true
  graceEjectSeconds: 60
  graceWarningInterval: 15

# ============================================================
# Ready & Countdown
# ============================================================
ready:
  countdownSeconds: 5
  showActionBar: true
  showTitle: true
  countdownSound: BLOCK_NOTE_BLOCK_PLING
  countdownSoundPitch: 1.0
  teleportSound: ENTITY_ENDERMAN_TELEPORT

# ============================================================
# Cooldown
# ============================================================
cooldown:
  deathCooldownSeconds: 60
  quitCooldownSeconds: 30
  showCooldownBar: true
  displayUpdateTicks: 20

# ============================================================
# Disconnect Handling
# ============================================================
disconnect:
  graceSeconds: 300
  checkIntervalTicks: 200
  notifyTeam: true
  notifyGraceExpired: true

# ============================================================
# Team Settings
# ============================================================
teams:
  maxSize: 5
  inviteExpirySeconds: 60

# ============================================================
# Respawn Settings
# ============================================================
respawn:
  invulnerabilitySeconds: 3
  canDealDamageDuringInvul: false
  invulEffect: GLOWING

# ============================================================
# Combat Worlds
# ============================================================
# Note: World list is now stored in data/worlds.yml
worlds:
  spawnSampling:
    maxAttempts: 50
    unsafeBlocks:
      - LAVA
      - WATER
      - CACTUS
      - MAGMA_BLOCK
      - FIRE
      - SOUL_FIRE
    requiredHeadroom: 2

# ============================================================
# Teleport Commands
# ============================================================
teleport:
  prepCommand: "tp ${player} world 0 64 0"
  enterCommand: "tp ${player} ${world} ${x} ${y} ${z} ${yaw} ${pitch}"
  respawnCommand: "tp ${player} ${world} ${x} ${y} ${z}"

# ============================================================
# Starter Selection
# ============================================================
# Note: Starter weapon/helmet options are now stored in data/starters.yml
starterSelection:
  requireWeaponFirst: true
  autoOpenHelmetGui: true

# ============================================================
# Inventory Rules
# ============================================================
# Note: Drop/pickup prevention is now hardcoded for all modes except LOBBY
# Equipment pools are now stored in data/equipment/weapons.yml and data/equipment/helmets.yml
inventoryRules:
  lockEquipmentSlots: true
  weaponSlotIndex: 0
  rewards:
    overflowMode: PENDING_QUEUE
    pendingFlushInterval: 100
    maxPendingItems: 100

# ============================================================
# Progression
# ============================================================
progression:
  baseXpRequired: 100
  xpPerLevelIncrease: 50
  xpMultiplierPerLevel: 1.1
  weaponLevelWeight: 1
  helmetLevelWeight: 1

  overflow:
    enabled: true
    xpPerPermaScore: 1000
    notifyPlayer: true

  maxLevelBehavior:
    mode: GRANT_PERMA_SCORE
    permaScoreReward: 10

# ============================================================
# Upgrade Selection (Chat-based, non-intrusive)
# ============================================================
upgrade:
  # Timeout before auto-selection (seconds)
  timeoutSeconds: 30
  # Interval between chat reminders (seconds)
  reminderIntervalSeconds: 5
  # Perma-score reward when both weapon and helmet are at max level
  bothMaxPermaReward: 10

# ============================================================
# Enemy Spawning
# ============================================================
# Note: Archetypes are now stored in data/archetypes.yml
spawning:
  loop:
    tickInterval: 20
    enabled: true

  limits:
    targetMobsPerPlayer: 10
    maxSpawnsPerPlayerPerTick: 3
    maxSpawnsPerTick: 20
    maxCommandsPerTick: 50
    mobCountRadius: 30.0

  positioning:
    minSpawnDistance: 8.0
    maxSpawnDistance: 25.0
    maxSampleAttempts: 10

  levelCalculation:
    levelSamplingRadius: 50.0
    avgLevelMultiplier: 1.0
    playerCountMultiplier: 0.2
    levelOffset: 0
    minLevel: 1
    maxLevel: 100
    timeScaling:
      enabled: true
      timeStepSeconds: 60
      levelPerStep: 1

  mobIdentification:
    mobTag: "vrs_mob"
    levelTagPattern: "vrs_lvl_(\\d+)"
    defaultLevel: 1

# ============================================================
# Rewards
# ============================================================
rewards:
  xpShare:
    enabled: true
    radius: 20.0
    sharePercent: 0.25

  coin:
    material: EMERALD
    customModelData: 0
    displayName: "§e金币"

# ============================================================
# Merchants
# ============================================================
# Note: Merchant templates are now stored in data/merchants.yml
merchants:
  enabled: true

  spawn:
    intervalSeconds: 120
    lifetimeSeconds: 60
    minDistanceFromPlayers: 20.0
    maxDistanceFromPlayers: 50.0

  entity:
    type: VILLAGER
    name: "§6流浪商人"
    invulnerable: true
    noAi: true
    glowing: false

# ============================================================
# Economy
# ============================================================
economy:
  permaScore:
    objectiveName: "vrs_perma"
    displayName: "永久积分"

# ============================================================
# Scoreboard
# ============================================================
scoreboard:
  enabled: true
  title: "§6§l武 生"
  updateInterval: 10

# ============================================================
# Persistence
# ============================================================
persistence:
  saveIntervalSeconds: 300
  saveOnQuit: true
  saveOnRunEnd: true

  paths:
    items: "data/items"
    runtime: "data/runtime"

  backup:
    enabled: true
    intervalHours: 6
    maxBackups: 10

# ============================================================
# Templates
# ============================================================
templates:
  escaping:
    enabled: true
    escapeChars: ";&|`$\\"
  missingPlaceholder:
    mode: ERROR

# ============================================================
# Debug
# ============================================================
debug:
  enabled: false
  logLevel: INFO
  separateLogFile: true
  performance:
    enabled: true
    slowOperationThreshold: 50
    showInDebugCommand: true
